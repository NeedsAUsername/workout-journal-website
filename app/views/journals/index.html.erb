<h1><%= @journal.name %></h1>

<h3>
<% if @program_plan.nil? %>
  <%= link_to 'Check out the programs page to start a program', program_plans_path %>
<% else %>
  Your Current Program: <%= link_to @program_plan.name, program_plan_path(@program_plan) %>
  <br>Routine:
  <ul>
  <% @program_plan.days.each do |day| %>
    <li>
      <%= day.name %>-
      <% day.exercises.each_with_index do |exercise, i| %>
        <% if i == day.exercises.length - 1 %>
          <%= exercise.name %>
        <% else %>
          <%= exercise.name %>,
        <% end %>
      <% end %>
    </li>
  <% end %>
  </ul>
<% end %>
</h3>

<%= form_for [@journal, @entry] do |f| %>
  <%= f.label :date %><br>
  <%= f.date_field :date, value: Time.now.strftime('%Y-%m-%d') %><br>
  <%= f.label :comments %><br>
  <%= f.text_area :comments %><br>
  <%= f.fields_for :exercises, @entry.exercises.build do |e| %>
    <%= e.collection_select(:name, @program_plan.exercises, :name, :name) %>
    <%= e.label :weight %>
    <%= e.text_field :weight %>
  <% end %>
  <%= f.submit %>
<% end %>

<br>
<%= link_to 'Previous Entries', journal_entries_path(@journal) %>
